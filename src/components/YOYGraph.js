import React from 'react';
import Plot from 'react-plotly.js';

// this is where stuff happens
// top most component in the hierarchy
class YOYGraph extends React.Component 
{
		// this is where I can declare all my variables and do other function work to get the data I want
	constructor(props){
		super(props);
		
		this.handleJsonChange = this.handleJsonChange.bind(this);
		this.getPlots = this.getPlots.bind(this);
		this.handleNewPlot = this.handleJsonChange.bind(this);


	
		let year24 = {
					x: ['2000-01-02','2000-01-03','2000-01-04','2000-01-05','2000-01-08','2000-01-09','2000-01-10','2000-01-11','2000-01-17','2000-01-18','2000-01-19','2000-01-22','2000-01-23','2000-01-24','2000-01-25','2000-01-29','2000-01-30','2000-01-31','2000-02-01','2000-02-05','2000-02-06','2000-02-07','2000-02-08','2000-02-12','2000-02-13','2000-02-14','2000-02-15','2000-02-19','2000-02-20','2000-02-21','2000-02-22','2000-02-26','2000-02-27','2000-02-28','2000-02-29','2000-03-04','2000-03-06','2000-03-07','2000-03-11','2000-03-12','2000-03-13','2000-03-14','2000-03-18','2000-03-19','2000-03-20','2000-03-21','2000-03-25','2000-03-26','2000-03-27','2000-03-28','2000-04-01','2000-04-02','2000-04-03','2000-04-04','2000-04-08','2000-04-10','2000-04-11','2000-04-12'],
					y: [2.21149185322583,1.7031518322294101,1.5012253268101925,1.4654010140954068,1.1484273733854824,1.1627367478186021,4.2369651059860605,3.197340934497157,2.3649932738038175,1.7769214283860226,1.312789943353796,1.0824691521343417,0.8206437710886682,0.66010174637816,0.5057787527516007,0.3931087015965045,0.383639048875054,0.30558400152044446,0.2651893541246635,0.12490880990914448,0.10430104595268298,0.09233079494506857,0.10092245408929594,0.0945244011257461,0.11528154007106066,0.7503026462549374,0.6128160500379164,0.49310562183785367,0.3967734998359433,0.35910588887721484,0.279188150506728,0.22531824863831057,0.21938467695558483,0.1782457968911305,0.17159214313069734,0.15801664673240642,0.1990246446906688,0.2269861016257116,0.1646486116161831,0.13938750286111143,0.11097720868011188,0.0883069124193584,0.06997477381750071,0.05828928377416944,0.06878208994383195,0.05080232181236236,0.043458724180795445,0.03353652310384791,0.0274708254478649,0.02020473783131662,0.018094883563766807,0.041604005279419515,0.05478253078330523,0.5874991345504461,0.44170738303778345,0.3343870668868475,0.2553053494251973,0.22037561493362956],
					type: 'scattergl',
					name: '2024',
					fill: "tozeroy",
					hovertemplate:	'<b>2024 <b>%{x|%m-%d}: %{y:.2f}',
					mode: 'lines',
					line: {
						color:'#d3eb89',
						width: 3,
					}
				}  
		let year23 = {
					x: ['2000-01-03','2000-01-04','2000-01-05','2000-01-09','2000-01-10','2000-01-11','2000-01-12','2000-01-16','2000-01-17','2000-01-18','2000-01-19','2000-01-23','2000-01-24','2000-01-25','2000-01-26','2000-01-30','2000-01-31','2000-02-01','2000-02-02','2000-02-06','2000-02-07','2000-02-08','2000-02-09','2000-02-13','2000-02-14','2000-02-15','2000-02-16','2000-02-20','2000-02-21','2000-02-22','2000-02-23','2000-02-27','2000-02-28','2000-03-01','2000-03-02','2000-03-06','2000-03-07','2000-03-08','2000-03-09','2000-03-13','2000-03-14','2000-03-15','2000-03-16','2000-03-20','2000-03-21','2000-03-22','2000-03-23','2000-03-27','2000-03-28','2000-03-29','2000-03-30','2000-04-03','2000-04-04','2000-04-05','2000-04-07','2000-04-10','2000-04-11','2000-04-12','2000-04-13','2000-04-17','2000-04-18','2000-04-19','2000-04-20','2000-04-24','2000-04-25','2000-04-26','2000-04-27','2000-05-01','2000-05-02','2000-05-03','2000-05-04','2000-05-08','2000-05-09','2000-05-10','2000-05-11','2000-05-15','2000-05-16','2000-05-17','2000-05-18','2000-05-22','2000-05-23','2000-05-24','2000-05-25','2000-05-30','2000-05-31','2000-06-01','2000-06-05','2000-06-06','2000-06-07','2000-06-08','2000-06-12','2000-06-13','2000-06-14','2000-06-15','2000-06-19','2000-06-20','2000-06-21','2000-06-22','2000-06-26','2000-06-27','2000-06-28','2000-06-29','2000-07-03','2000-07-05','2000-07-06','2000-07-07','2000-07-10','2000-07-11','2000-07-12','2000-07-13','2000-07-17','2000-07-18','2000-07-19','2000-07-20','2000-07-24','2000-07-25','2000-07-26','2000-07-27','2000-07-31','2000-08-01','2000-08-02','2000-08-03','2000-08-07','2000-08-08','2000-08-09','2000-08-10','2000-08-14','2000-08-15','2000-08-16','2000-08-17','2000-08-21','2000-08-22','2000-08-23','2000-08-24','2000-08-28','2000-08-29','2000-08-30','2000-08-31','2000-09-05','2000-09-06','2000-09-07','2000-09-08','2000-09-11','2000-09-12','2000-09-13','2000-09-14','2000-09-18','2000-09-19','2000-09-20','2000-09-21','2000-09-25','2000-09-26','2000-09-27','2000-09-28','2000-10-02','2000-10-03','2000-10-04','2000-10-05','2000-10-09','2000-10-10','2000-10-11','2000-10-12','2000-10-16','2000-10-17','2000-10-18','2000-10-19','2000-10-23','2000-10-24','2000-10-25','2000-10-26','2000-10-30','2000-10-31','2000-11-01','2000-11-02','2000-11-06','2000-11-07','2000-11-08','2000-11-09','2000-11-13','2000-11-14','2000-11-15','2000-11-16','2000-11-20','2000-11-21','2000-11-22','2000-11-24','2000-11-27','2000-11-28','2000-11-29','2000-11-30','2000-12-04','2000-12-05','2000-12-06','2000-12-07','2000-12-11','2000-12-12','2000-12-13','2000-12-14','2000-12-18','2000-12-19','2000-12-20','2000-12-21','2000-12-26','2000-12-27','2000-12-28','2000-12-29'],
					y:[5.9746350887059325,4.8485062937093275,3.85914335375129,3.13342202911154,2.9462295490472923,2.805711731941775,2.1463625608531,2.054189485509643,26.405145019025237,20.43656318858783,15.63839587234846,13.360363505725283,10.746176684538579,8.529315519474173,6.456969076647183,12.871018771273853,9.891350190583882,7.468934520763246,5.7869898088301355,4.447422726213092,3.395891285737715,2.1745021902047266,1.6437373944416216,1.6968066267568538,1.4425642434363897,7.875005217003044,5.9216563381090594,5.999983816376388,4.943298212300697,3.9570882733859443,3.0129873211050606,2.3101583471320812,1.8467474664372603,1.4378955732812115,1.7501269278473879,1.3242794545788021,1.2188812705887595,1.4657592734986775,4.101515032470436,7.428622463236001,7.672390329913052,5.7525000343810495,4.617619539419809,3.4935331582748614,2.916292343386856,2.220571280432367,2.068823513130955,1.8966378676077706,1.7332418068315754,1.5770060730147715,7.529228316697438,5.717155159521479,4.510912184412146,3.3819817314548803,2.6560664289613665,2.183616765953364,3.107739171165675,2.3574801054490253,2.0440651062687185,1.5333741799248826,1.1758605796003618,0.9050337825730786,0.676920220565398,0.36261569782882075,0.30055044300645034,0.22058747156006467,0.18295489868636883,0.14686464625684761,0.1108471072241108,0.09113044641224118,0.0702714872361069,0.047812632867554175,0.05948527282045424,0.047190228482835286,0.04275540757558267,0.03676055513030588,0.055632806381666115,0.051127603357989715,0.04518960695499484,0.15530144927604178,0.18716755681614908,0.14335474724017327,0.1420780422573171,0.10888164605020943,0.16882343371485803,0.1630803617926431,0.12354772623770409,0.19290780610736155,0.14557055320156206,0.20137939130076893,0.1582134863842395,0.3077046855136707,0.22936931831689494,0.1772345602553246,0.13430766866881502,0.2551922158103178,0.19236290944961926,0.1473039970195686,0.11481664364455774,0.08987847043307085,0.06642887816474556,0.05066561337832323,0.03615172328356554,0.04903808960846632,0.03248419079604487,0.03218363285753389,0.024142963467846338,0.0245270123106121,0.016304791222757378,0.014001004104204073,0.010993678247190131,0.012216903379453402,0.009088018208879934,0.13603334296129732,0.10228103704242941,0.46641818023478143,0.3535565283760694,0.31006484900714926,0.23339950440883842,0.2338671923150287,0.1760803140516527,4.688502103761025,3.553716226373306,2.955684285703461,2.2596427964935812,1.7158732265829133,1.2998542652702605,0.9983779772425907,0.7436792749515826,0.6086010329586287,0.45736388359168595,0.6389782998741785,0.49255234279724025,0.43276904496726576,0.41661452142773586,0.593518240832831,0.5390714977202321,0.44432133266731855,0.3665218494582733,0.28948934728555037,0.2766187472954785,0.2214885964732152,0.2556081079350011,0.30964430998227294,0.2310455514834183,0.19361226988579736,0.15161997164600957,0.39253035981011053,0.29344939563874484,0.2535238227046966,0.32303968073226486,0.5713742306986617,0.4428777694515497,0.4065673263442618,0.31847307958005633,0.3318366713021815,0.2784425553290396,0.23501694569282983,0.18222028329178117,0.2633881932628079,0.20490145862146383,0.1757920824363035,0.14683458199041982,0.25374999119629926,0.20136328632103379,0.15526830563903285,0.11712203268979982,0.09132676924192741,0.07569948258840295,0.06434550848458387,0.05102604630743046,0.13514932353767975,0.10184681499551371,0.11786613706590976,0.16601141113351603,0.2819168809352391,0.232468871671056,0.23153757929149565,0.3445742063478869,0.2621812724468558,0.2251591671779871,0.3242867659673086,0.3012434235835246,0.6041966542679458,0.8985381624910463,0.8767043992796129,0.8326278821079944,0.8548102370577166,1.262301515940081,1.6537478898351445,1.950427932253392,2.5165104439697794,2.246843970843179,14.165290093781447,10.884231135183105,9.650578211618207,8.356724046996097,6.374422595602679,5.054591505167508,6.1915131346270424,6.538329854110945,6.362996186187325,4.798392255495295,5.040897292286174,3.9231440908849566,3.007811784717123],
					type: 'scatter',
					name: '2023',
					fill: "tozeroy",
					hovertemplate:	'<b>2023 <b>%{x|%m-%d}: %{y:.2f}',
					mode: 'lines',
					line: {
						color:'3e61b3',
						width: 3,
					}
				}  

			let year22= {
					x:['2000-02-15','2000-02-16','2000-02-17','2000-02-21','2000-02-22','2000-02-23','2000-02-24','2000-02-28','2000-03-01','2000-03-02','2000-03-03','2000-03-07','2000-03-08','2000-03-09','2000-03-10','2000-03-14','2000-03-15','2000-03-16','2000-03-17','2000-03-21','2000-03-22','2000-03-23','2000-03-24','2000-03-28','2000-03-29','2000-03-30','2000-03-31','2000-04-04','2000-04-05','2000-04-06','2000-04-07','2000-04-11','2000-04-12','2000-04-13','2000-04-14','2000-04-18','2000-04-19','2000-04-20','2000-04-21','2000-04-25','2000-04-26','2000-04-27','2000-04-28','2000-05-02','2000-05-03','2000-05-04','2000-05-05','2000-05-09','2000-05-10','2000-05-11','2000-05-12','2000-05-16','2000-05-17','2000-05-18','2000-05-19','2000-05-23','2000-05-24','2000-05-25','2000-05-26','2000-05-31','2000-06-01','2000-06-02','2000-06-06','2000-06-07','2000-06-08','2000-06-09','2000-06-13','2000-06-14','2000-06-15','2000-06-16','2000-06-20','2000-06-21','2000-06-22','2000-06-23','2000-06-27','2000-06-28','2000-06-29','2000-06-30','2000-07-05','2000-07-06','2000-07-07','2000-07-08','2000-07-11','2000-07-12','2000-07-13','2000-07-14','2000-07-18','2000-07-19','2000-07-20','2000-07-21','2000-07-25','2000-07-26','2000-07-27','2000-07-28','2000-08-01','2000-08-02','2000-08-03','2000-08-04','2000-08-08','2000-08-09','2000-08-10','2000-08-11','2000-08-15','2000-08-16','2000-08-17','2000-08-18','2000-08-22','2000-08-23','2000-08-24','2000-08-25','2000-08-29','2000-08-30','2000-08-31','2000-09-01','2000-09-06','2000-09-07','2000-09-08','2000-09-12','2000-09-13','2000-09-14','2000-09-15','2000-09-19','2000-09-20','2000-09-21','2000-09-22','2000-09-26','2000-09-27','2000-09-28','2000-09-29','2000-10-03','2000-10-05','2000-10-06','2000-10-10','2000-10-11','2000-10-12','2000-10-13','2000-10-17','2000-10-18','2000-10-19','2000-10-20','2000-10-24','2000-10-25','2000-10-26','2000-10-27','2000-10-31','2000-11-01','2000-11-02','2000-11-03','2000-11-07','2000-11-08','2000-11-09','2000-11-10','2000-11-14','2000-11-15','2000-11-16','2000-11-17','2000-11-21','2000-11-22','2000-11-23','2000-11-28','2000-11-29','2000-11-30','2000-12-01','2000-12-05','2000-12-06','2000-12-07','2000-12-08','2000-12-12','2000-12-13','2000-12-14','2000-12-15','2000-12-19','2000-12-20','2000-12-21','2000-12-22','2000-12-27','2000-12-28','2000-12-29'],
					y:[0.1671442473029873,0.1291028354816025,0.09706806416635391,0.07593886196463356,0.05803110332184657,0.06362402032424687,0.05086659509694448,0.03767439480859343,0.022476582601680672,0.017689737645929793,0.015684207569164374,0.011846872615638734,0.008229141446459518,0.006138400047940886,0.005541318535466842,0.004255407129562433,0.0036188072353905334,0.003853062509763314,0.0028209512368544626,0.0027195106936198665,0.0022885178446308265,0.001558422046409348,0.00193373105789802,0.0014299483348817138,0.017894990773493026,0.013680792691025971,0.010471997348135156,0.010954277299625446,0.008868312939964203,0.00730342574795891,0.008400401043337996,0.006334077757190447,0.04956366473742964,0.03745809105072636,0.109426397503571,0.08455989235120996,0.08698103427214701,0.06742051572258442,0.1489574459998904,0.11674235340588927,0.09176455461243774,0.07493864246975077,0.07517389254776873,0.06569158260714399,0.07089961092465938,0.05511139018255899,0.05779473817185353,0.042154964197276955,0.10155555300700286,0.10756161823862383,0.11806420191585064,0.08919138400810547,0.1461235415259315,0.12070102964602256,0.14423908981934913,0.13309270864046582,0.16038408779613422,0.15186212743722963,0.1546411599790649,0.19909067481472162,0.17254448763593608,0.35351776133847845,0.29640294046502846,0.2527450136783195,0.1962207187507617,0.2159182399112861,0.16859053958483577,0.1385533105437735,0.10630271330218242,0.08422229186617243,0.7684306693979737,0.9529029527723416,0.7137967583356541,0.5499743897142625,0.6229705633770588,0.5427780030938875,0.4150130286999135,0.3412529734139863,0.29837238885645345,0.245374950254739,0.35829334887616726,0.2821521504280481,0.22723228682603763,3.7119683872643976,2.899211203359473,2.2532128282883197,2.1054002616138647,1.631914588941015,1.2935848174427929,1.8658589963901964,1.4630390113918315,1.1367334635013875,0.8575327783003286,0.7903805524604891,0.6203370572790944,0.4710033058626457,0.30260956858848376,0.2653085154636251,0.22647728455704755,1.3875846271860348,1.0433964109640628,0.7891502285801827,0.654148426801348,0.5115608464165156,0.4854306851614411,0.3700389598551577,1.1678703715803205,0.9467229871760137,0.8288409709837026,0.6323356905736758,0.4857767178286772,0.40933014390599193,0.27874937114981035,0.3882835518170562,0.3156096690251303,0.2560912572585729,0.6767873012671207,0.5252824892068408,0.4032222544888694,0.29404446471367185,0.22875578441394628,0.2079122554241962,0.16451144530158948,0.12930064086756246,0.10008759906384539,0.08448752946712731,0.06707197584376146,0.05254913280739976,0.04264088502219808,0.022896110641043715,0.022204572929939163,0.01722350167244788,0.08053883425640646,0.06950172327218981,0.08041867307616658,0.06499500204935604,0.05473987079170588,0.04562346097503236,0.04309254660047729,0.10248543469082533,0.07761253864224091,0.07461814317863272,0.05902502014267032,0.1165451439902283,0.11350255868557477,1.698571919504163,1.2965998887595436,1.102056283830015,0.8662712172570931,0.6547405148058296,0.494000195806014,0.3733813535138916,0.2809182115648066,0.21280286319545338,0.17275481196734765,0.14685097056977128,0.11828489832525149,0.28574729894075107,0.20183858140519254,0.3115019700959594,0.28479762943345793,1.1097346359257365,1.325186044200365,1.2398980204109182,1.5768998893978399,2.4459327985366848,1.9227571984162857,1.685939033779429,1.6340859945266084,2.171228809668744,2.004656855923486,2.280087840183928,2.181537005391031,3.505716587862015,2.828352947592899,3.297910925344869,2.8622478976322503,2.436900532386906],
					type: 'scatter',
					name: '2022',
					mode: 'lines',
					hovertemplate:	'<b>2022 <b>%{x|%m-%d}: %{y:.2f}',
					hoveron:"fills+points",
					fill: "tozeroy",
					line: {
						color:'#93d8ff',
						width: 3,
					}
				}

		const plotJson = {

			data : [year22,year23, year24],
			layout: {
				yaxis:{
					title: 'Effective Wastewater Levels (Gene copies/L)e4',
					autotick: true,
					showgrid: true,
					automargin:true, 
					font: {
						family: 'trebuchet ms,sans-serif',
						color: '#0e2d4c',
						size: 20,
					},
				},
				xaxis:{
					type: 'date',
					autorange: true,
					tickformat:"%b %d",
					title: 'Date',
					showgrid: false,
					automargin:true, 
					font: {
						family: 'trebuchet ms,sans-serif',
						color: '#0e2d4c',
						size: 20,
					},
				},
				margin: {t:10, r:10, l: 10, b:20},
				title: {
					text:'Year-over-year Chicago Covid Wastewater data', 
					automargin:true, 
					font: {
						family: 'trebuchet ms,sans-serif',
						color: '#0e2d4c',
						size: 20,
					},
				}
			}
		}

		this.state = {
			json: plotJson,
		}
	}

	handleJsonChange = newJSON => {
		this.setState({json: newJSON});
	}
	
	handleNewPlot = option => {
		// here is where I need to parse the output of getPlot into a 
		// json that we can set the set of
		// eventually
		/*
		this.setState({
			json: newJSON,
		});
		*/
	}

	getPlots = (input) => {
		// here is where I need to parse the csv file in this directory
	};

	render() {

		return (
			// this is where I have my returnable html
			<div className="Graph">
				<Plot
					data={this.state.json.data}
					layout={this.state.json.layout}
					config={{displayModeBar: false}}
				/>
			</div>
		);
	}
}
export default YOYGraph;
